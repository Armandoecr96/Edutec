<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\chemical\BloodTest.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/About.html">About</a></li>
                                <li><a href="../classes/App.html">App</a></li>
                                <li><a href="../classes/BloodTest.html">BloodTest</a></li>
                                <li><a href="../classes/Help.html">Help</a></li>
                                <li><a href="../classes/Menu.html">Menu</a></li>
                                <li><a href="../classes/PreveiwQuestion.html">PreveiwQuestion</a></li>
                                <li><a href="../classes/RenderButtonsPQ.html">RenderButtonsPQ</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/BloodTestStates.html">BloodTestStates</a></li>
                                <li><a href="../modules/PreviewStates.html">PreviewStates</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src\chemical\BloodTest.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
import React, { Component } from &#x27;react&#x27;
import { StyleSheet, Text, View, Image, ImageBackground, Dimensions } from &#x27;react-native&#x27;
import states from &#x27;./states/BloodTestStates&#x27;
import { Container, Content, Card, CardItem, Button } from &#x27;native-base&#x27;
import textBox from &#x27;../assets/images/box.png&#x27;
import nextButton from &#x27;../assets/images/siguiente.png&#x27;
import previewButtom from &#x27;../assets/images/atras.png&#x27;
import SoundPlayer from &#x27;react-native-sound&#x27;
import playButtom from &#x27;../assets/images/play.png&#x27;
import pauseButtom from &#x27;../assets/images/pausa.png&#x27;
import stopButtom from &#x27;../assets/images/stop.png&#x27;
import salirButtom from &#x27;../assets/images/salida.png&#x27;
import leftButtom from &#x27;../assets/images/izquierda.png&#x27;
import rightButtom from &#x27;../assets/images/derecha.png&#x27;

/**
 * @constant {int} height
 * @memberof BloodTest
 * @description Dimensiones de la pantalla
 */
var { height } = Dimensions.get(&#x27;window&#x27;)

/**
 * @class BloodTest
 * @description Interacción de la toma de muestra de sangre
 */
export default class BloodTest extends Component {
  constructor (props) {
    super(props)
    this.state = {
      index: 0,
      pause: false,
      song: null,
      verificacion: false,
      playVisibility: &#x27;flex&#x27;,
      pauseVisibbility: &#x27;none&#x27;
    }
  }

  /**
   * @method componentWillMount
   * @memberof BloodTest
   * @description Se hace la validación iniciar poniendo el primer elemento del arreglo en la pantalla
   */
  componentWillMount () {
    this.state.song = new SoundPlayer(states.questionary[0].audio, SoundPlayer.MAIN_BUNDLE, (error) =&gt; {
      if (error) {
        console.log(&#x27;failed to load the sound&#x27;, error)
      }
    })
  }

  /**
 * @method pauseToPlay
 * @memberof BloodTest
 * @description Cambio de vista de los botones de pausa a reproducción
 */
  pauseToPlay () {
    this.setState({
      playVisibility: &#x27;flex&#x27;,
      pauseVisibbility: &#x27;none&#x27;
    })
  }

  /**
   * @method play
   * @memberof BloodTest
   * @description Activación del archivo de audio actual
   */
  play () {
    if (this.state.song !== null) {
      this.state.song.play((succes) =&gt; {
        if (succes) {
          this.pauseToPlay()
        }
      })
    }
    this.setState({
      playVisibility: &#x27;none&#x27;,
      pauseVisibbility: &#x27;flex&#x27;
    })
  }

  /**
   * @method pause
   * @memberof BloodTest
   * @description Pausa del archivo actual de repoducción
   */
  pause () {
    if (this.state.song !== null) {
      this.state.song.pause((succes) =&gt; {
        if (!succes) {
          console.log(&#x27;Error en reproducción&#x27;)
        }
      })
    }
    this.pauseToPlay()
  }

  /**
   * @method stop
   * @memberof BloodTest
   * @description Alto del archivo actual de repoducción
   */
  stop () {
    if (this.state.song !== null) {
      // Para hacer alto total debemos primero ponerle play antes del stop
      this.state.song.play()
      this.state.song.stop((succes) =&gt; {
        if (!succes) {
          this.pauseToPlay()
        }
      })
    }
  }

  /**
   * @method changeQuestion
   * @memberof BloodTest
   * @param {int} id - ID o identificador en el arreglo
   * @description Función que ejecuta el ciclo del arreglo en la aplicación
   */
  changeQuestion (id) {
    this.setState({ index: id, time: &#x27;&#x27; })
    delete this.state.song
    this.state.song = new SoundPlayer(states.questionary[id].audio, SoundPlayer.MAIN_BUNDLE, (error) =&gt; {
      if (error) {
        console.log(&#x27;failed to load the sound&#x27;, error)
      }
    })
  }

  /**
   * @memberof BloodTest
   * @method render
   * @description Renderizado de los elementos en la apicación
   * @todo Optimizar o remover las validaciones if
   */
  render () {
    return (
      &lt;Container&gt;
        &lt;Content&gt;
          &lt;ImageBackground source={require(&#x27;../assets/images/bg1.jpg&#x27;)} style={styles.background}&gt;
            {
              states.questionary[this.state.index].spanishText !== null
                ? (
                  &lt;View style={{ height: height, marginBottom: 88 }}&gt;
                    &lt;Card transparent style={styles.card}&gt;
                      &lt;CardItem style={styles.cardItem}&gt;
                        &lt;Image source={textBox} style={styles.cardImage} /&gt;
                        &lt;Text style={styles.title}&gt;Español&lt;/Text&gt;
                        &lt;Text style={[styles.cardText, styles.ajuste]}&gt;{states.questionary[this.state.index].spanishText}&lt;/Text&gt;
                      &lt;/CardItem&gt;
                    &lt;/Card&gt;

                    &lt;Card transparent style={styles.card}&gt;
                      &lt;CardItem style={styles.cardItem}&gt;
                        &lt;Image source={textBox} style={styles.cardImage} /&gt;
                        &lt;Text style={styles.title}&gt;Maya&lt;/Text&gt;
                        &lt;Text style={styles.cardText}&gt;{states.questionary[this.state.index].mayanText}&lt;/Text&gt;
                      &lt;/CardItem&gt;
                    &lt;/Card&gt;

                    &lt;Text style={{ textAlign: &#x27;center&#x27;, color: &#x27;#FFFFFF&#x27;, fontSize: 17, fontWeight: &#x27;bold&#x27; }}&gt;{this.state.time}&lt;/Text&gt;

                    &lt;View style={{ display: &#x27;flex&#x27;, flexDirection: &#x27;column&#x27; }}&gt;

                      &lt;View style={{ display: &#x27;flex&#x27;, flexDirection: &#x27;row&#x27;, justifyContent: &#x27;space-around&#x27; }}&gt;
                        &lt;Button
                          transparent
                          onPress={() =&gt; this.play()}
                          style={{ width: 80, height: 80, display: this.state.playVisibility }}
                        &gt;
                          &lt;Image source={playButtom} style={styles.imageButton} /&gt;&lt;/Button&gt;
                        &lt;Button
                          transparent
                          onPress={() =&gt; this.pause()}
                          style={{ width: 80, height: 80, display: this.state.pauseVisibbility }}
                        &gt;
                          &lt;Image source={pauseButtom} style={styles.imageButton} /&gt;&lt;/Button&gt;
                        &lt;Button
                          transparent
                          onPress={() =&gt; this.stop()}
                          style={{ width: 80, height: 80 }}
                        &gt;
                          &lt;Image source={stopButtom} style={styles.imageButton} /&gt;&lt;/Button&gt;
                      &lt;/View&gt;
                      &lt;View style={{ marginTop: 24, display: &#x27;flex&#x27;, flexDirection: &#x27;row&#x27;, alignItems: &#x27;center&#x27;, justifyContent: &#x27;center&#x27; }}&gt;
                        {states.questionary[this.state.index].options.map((selection, key) =&gt; {
                          return (
                            selection.title === &#x27;Siguiente&#x27; ? &lt;Button transparent key={key} onPress={() =&gt; this.changeQuestion(selection.nextID)} style={{ margin: 8, padding: 8, marginBottom: 16 }} &gt;
                              &lt;Image source={nextButton} style={{ height: 80, width: 124 }} /&gt;
                            &lt;/Button&gt;
                              : selection.title === &#x27;Atras&#x27; ? &lt;Button transparent key={key} onPress={() =&gt; this.changeQuestion(selection.backID)} style={{ margin: 8, padding: 8, marginBottom: 16 }}&gt;
                                &lt;Image source={previewButtom} style={{ height: 80, width: 124 }} /&gt;
                              &lt;/Button&gt;
                                : selection.title === &#x27;Salir&#x27; ? &lt;Button transparent key={key} onPress={() =&gt; this.props.navigation.navigate(&#x27;HomeChemical&#x27;)} style={{ margin: 8, padding: 8, marginBottom: 16 }}&gt;
                                  &lt;Image source={salirButtom} style={{ height: 80, width: 124 }} /&gt;
                                &lt;/Button&gt;
                                  : selection.title === &#x27;Izquierda&#x27; ? &lt;Button transparent key={key} onPress={() =&gt; this.changeQuestion(selection.nextID)} style={{ margin: 8, padding: 8, marginBottom: 16 }}&gt;
                                    &lt;Image source={leftButtom} style={{ height: 80, width: 124 }} /&gt;
                                  &lt;/Button&gt;
                                    : selection.title === &#x27;Derecha&#x27; ? &lt;Button transparent key={key} onPress={() =&gt; this.changeQuestion(selection.nextID)} style={{ margin: 8, padding: 8, marginBottom: 16 }}&gt;
                                      &lt;Image source={rightButtom} style={{ height: 80, width: 124 }} /&gt;
                                    &lt;/Button&gt; : null
                          )
                        })}
                      &lt;/View&gt;
                    &lt;/View&gt;
                  &lt;/View&gt;
                )
                : &lt;View style={{ height: height, alignItems: &#x27;center&#x27;, justifyContent: &#x27;center&#x27;, display: &#x27;flex&#x27; }}&gt;
                  {
                    this.state.index === 1
                      ? &lt;Image style={styles.gif} source={require(&#x27;../assets/images/alargarN.gif&#x27;)} /&gt;
                      : this.state.index === 7
                        ? &lt;Image style={styles.gif} source={require(&#x27;../assets/images/cerrar.gif&#x27;)} /&gt;
                        : this.state.index === 10
                          ? &lt;Image style={styles.gif} source={require(&#x27;../assets/images/a21.gif&#x27;)} /&gt;
                          : this.state.index === 12
                            ? &lt;Image style={styles.gif} source={require(&#x27;../assets/images/abrir.gif&#x27;)} /&gt;
                            : this.state.index === 14
                              ? &lt;Image style={styles.gif} source={require(&#x27;../assets/images/encoger.gif&#x27;)} /&gt;
                              : &lt;Image style={styles.gif} source={require(&#x27;../assets/images/encogerN.gif&#x27;)} /&gt;
                  }

                  &lt;View style={{ marginTop: 24, display: &#x27;flex&#x27;, flexDirection: &#x27;row&#x27;, alignItems: &#x27;center&#x27;, justifyContent: &#x27;center&#x27; }}&gt;
                    {states.questionary[this.state.index].options.map((selection, key) =&gt; {
                      return (
                        selection.title === &#x27;Siguiente&#x27; ? &lt;Button transparent key={key} onPress={() =&gt; this.changeQuestion(selection.nextID)} style={{ margin: 8, padding: 8, marginBottom: 16 }} &gt;
                          &lt;Image source={nextButton} style={{ height: 80, width: 124 }} /&gt;
                        &lt;/Button&gt;
                          : selection.title === &#x27;Atras&#x27; ? &lt;Button transparent key={key} onPress={() =&gt; this.changeQuestion(selection.backID)} style={{ margin: 8, padding: 8, marginBottom: 16 }}&gt;
                            &lt;Image source={previewButtom} style={{ height: 80, width: 124 }} /&gt;
                          &lt;/Button&gt;
                            : selection.title === &#x27;Salir&#x27; ? &lt;Button transparent key={key} onPress={() =&gt; this.changeQuestion(selection.backID)} style={{ margin: 8, padding: 8, marginBottom: 16 }}&gt;
                              &lt;Image source={salirButtom} style={{ height: 80, width: 124 }} /&gt;
                            &lt;/Button&gt;
                              : selection.title === &#x27;Izquierda&#x27; ? &lt;Button transparent key={key} onPress={() =&gt; this.changeQuestion(selection.nextID)} style={{ margin: 8, padding: 8, marginBottom: 16 }}&gt;
                                &lt;Image source={leftButtom} style={{ height: 80, width: 124 }} /&gt;
                              &lt;/Button&gt;
                                : selection.title === &#x27;Derecha&#x27; ? &lt;Button transparent key={key} onPress={() =&gt; this.changeQuestion(selection.nextID)} style={{ margin: 8, padding: 8, marginBottom: 16 }}&gt;
                                  &lt;Image source={rightButtom} style={{ height: 80, width: 124 }} /&gt;
                                &lt;/Button&gt;
                                  : null
                      )
                    })}
                  &lt;/View&gt;
                &lt;/View&gt;
            }

          &lt;/ImageBackground&gt;
        &lt;/Content&gt;
      &lt;/Container&gt;
    )
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: &#x27;#F5FCFF&#x27;
  },
  background: {
    flex: 1
  },
  welcome: {
    fontSize: 20,
    margin: 10
  },
  imageButton: {
    width: 80,
    height: 80
  },
  playerButtom: {
    width: 80,
    height: 80
  },
  card: {
    width: &#x27;100%&#x27;
  },
  cardItem: {
    width: &#x27;100%&#x27;,
    backgroundColor: &#x27;rgba(0,0,0,0)&#x27;
  },
  cardImage: {
    width: &#x27;100%&#x27;,
    resizeMode: &#x27;stretch&#x27;
  },
  ajuste: {
    marginLeft: -90
  },
  title: {
    marginLeft: &#x27;-90%&#x27;,
    color: &#x27;#FFFFFF&#x27;,
    fontWeight: &#x27;900&#x27;,
    fontSize: 24,
    marginTop: -120
  },
  cardText: {
    color: &#x27;#FFFFFF&#x27;,
    fontWeight: &#x27;900&#x27;,
    marginLeft: -40,
    fontSize: 24,
    marginRight: 40,
    marginTop: 48,
    width: &#x27;80%&#x27;
  },
  button: {
    width: null,
    height: 60,
    backgroundColor: &#x27;#330066&#x27;,
    justifyContent: &#x27;center&#x27;,
    marginTop: 8,
    marginLeft: 8,
    marginRight: 8
  },
  text: {
    fontSize: 18,
    color: &#x27;white&#x27;,
    textAlign: &#x27;center&#x27;,
    maxWidth: &#x27;80%&#x27;,
    padding: 8,
    alignItems: &#x27;center&#x27;
  },
  buttonDecision: {
    marginRight: 8,
    marginBottom: 16,
    width: 80,
    height: 70
  },
  gif: {
    width: &#x27;75%&#x27;,
    height: &#x27;75%&#x27;
  }
})

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
